<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Aaron O'Leary - meta</title>
    <meta name="description" content="a poole site" />
    <meta name="keywords" content="poole" />
    <link rel="stylesheet" type="text/css" href="/css/markdown.css" />
    <link rel="stylesheet" type="text/css" href="/css/pygment.css" />
</head>
<body>
    <div id="box">
        <div id="header">
            <h1>meta</h1>
        </div>
        <div id="menu">
        <span class=""><a href="/index.html">home</a></span>
<span class=""><a href="/notes.html">notes</a></span>
<span class="current"><a href="/meta.html">meta</a></span>
<span class=""><a href="/cv.html">cv</a></span>
        </div>
        <div id="content">
            <p>I really didn't want to write any html for this site. Html is horrible.
I know and use <a href="http://daringfireball.net/projects/markdown/">Markdown</a> and just needed something to manage my Markdown
content.</p>
<p>Trying to understand <a href="http://ringce.com/hyde">Hyde</a> made my head hurt. It was too complicated
for what I need. There are lots of static site generators written in Ruby.
That's no good for me - I understand Python and don't want to spend
time fiddling with ruby.</p>
<p>I tried to write my own CMS in bash but the complexity quickly builds up 
(beyond the 50 lines of code I limited myself to) when you try and make your
site do anything useful. Whilst reinventing the wheel is good for learning,
it isn't especially efficient. </p>
<p>A bit more searching and I came across <a href="https://bitbucket.org/obensonne/poole/overview">Poole</a>, which says</p>
<blockquote>
<p>Poole may be a good choice if you are familiar with Markdown and Python
  and if you want to build a rather simple site with only a spot of
  generated content.</p>
</blockquote>
<p>Great. I know Markdown and Python and I want a simple site!</p>
<p>If we want to put posts into the notes section of the site and want
them to appear in the page we need to do a couple of things.</p>
<ul>
<li>filename needs to be in the format <code>blog.yyyy-mm-dd.post_title.md</code></li>
<li>The file needs to have <code>---</code> at the start.</li>
</ul>
<p>I don't know why the second is the case, but that's what works.</p>
<p>This is something that is easily scripted. The idea is that I'll have
some notes written in Markdown somewhere on my machine and then do
<code>webify filename</code> and have it appear in the blog section of the website.</p>
<p><code>Webify</code> looks something like this (in bash):</p>
<pre><code>#!bash
filepath=$1
# file may or may not have .extension
filename=$(basename ${filepath})
short_filename=${filename%.*}

# where is the webpage input dir?
input_dir=/home/eeaol/web/input/notes

# get the date from the file, assuming dd/mm/yyyy format and
# converting to yyyy-mm-dd
date=$(grep '[0-9]./[0-9]./[0-9]...' $filename |\
        sed -e 's/^[^0-9]*//' \
            -e 's/\(..\)\/\(..\)\/\(....\)/\3-\2-\1/')

newfilepath=${input_dir}/notes.${date}.${short_filename}.md
cp $filepath $newfilepath

# add the --- to the start of the file
echo "---" &gt;&gt; tmpf
cat $newfilepath &gt;&gt; tmpf
mv tmpf $newfilepath
rm -f tmpf
</code></pre>
<h2>Syntax Highlighting</h2>
<p>This isn't enabled by default in Poole, but it is easy to get set up.</p>
<p><a href="http://freewisdom.org/projects/python-markdown/CodeHilite">CodeHilite</a> is an included extension to python-markdown. The only
requirement is <a href="http://pygments.org/">Pygments</a>.</p>
<p>To get syntax highlighting you need a css for pygment to work with.
Add this to your template page (page.html)</p>
<pre><code>&lt;link rel="stylesheet" type="text/css" href="/style/pygment.css" /&gt;
</code></pre>
<p>and make sure that style contains pygment.css, where this is a file
like one of <a href="https://github.com/icco/pygments-css">these</a></p>
<p>with all of the <code>.highlight</code> at the start of the lines replaced with
<code>.codehilite</code> (as this is the css class that markdown wraps code in),
e.g</p>
<pre><code>sed -i 's/^\.highlight/.codehilite/g' name_of_pygment_css_file.css
</code></pre>
<p>The source code for this site is on <a href="https://github.com/aaren/web">Github</a>.</p>
        </div>
    </div>
</body>
</html>
